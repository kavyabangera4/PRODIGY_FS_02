<!DOCTYPE html>
<html>
<head>
    <title>Employees</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-6">

<div class="flex justify-between items-center">
    <h1 class="text-2xl font-bold">Employee List</h1>

    <a href="/logout" class="bg-red-600 text-white px-4 py-2 rounded">Logout</a>
</div>

<br>

<!-- Flash Alerts -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
    {% for cat,msg in messages %}
        <div class="p-3 mb-3 text-white rounded
                    {% if cat=='error' %} bg-red-500 {% else %} bg-green-600 {% endif %}">
            {{ msg }}
        </div>
    {% endfor %}
{% endif %}
{% endwith %}

<a href="/add" class="bg-blue-600 text-white px-4 py-2 rounded">Add Employee</a>

<table class="w-full bg-white shadow mt-6 text-center">
    <tr class="bg-gray-200">
        <th class="p-3">Name</th>
        <th class="p-3">Email</th>
        <th class="p-3">Position</th>
        <th class="p-3">Salary</th>
        <th class="p-3">Department</th>
        <th class="p-3">Actions</th>
    </tr>

    {% for e in employees %}
    <tr class="border">
        <td class="p-3">{{ e.name }}</td>
        <td class="p-3">{{ e.email }}</td>
        <td class="p-3">{{ e.position }}</td>
        <td class="p-3">â‚¹{{ e.salary }}</td>
        <td class="p-3">{{ e.department }}</td>
        <td class="p-3">
            <a href="/edit/{{ e.id }}" class="text-blue-600">Edit</a> |
            <a onclick="return confirm('Delete this employee?')" 
               href="/delete/{{ e.id }}" 
               class="text-red-600">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

</body>
</html>
